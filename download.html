<!doctype html>
<html class="no-js" lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta http-equiv="Access-Control-Allow-Origin" content="*">
  <meta http-equiv="Access-Control-Allow-Origin" content="*">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DNA Damage and Repair Database</title>
  <link rel="stylesheet" href="css/foundation.css">
  <link rel="stylesheet" href="css/app.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.5.2/css/buttons.dataTables.min.css">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <!-- jquery for filter -->
  <!-- <link href="http://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css"> -->
  <!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script> -->
  <script src="js/vendor/jquery.js"></script>

  <script src="js/multifilter.js"></script>
  <!-- d3 script -->
  <script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>

  <!-- Font Style -->
  <link href="https://fonts.googleapis.com/css?family=Karla" rel="stylesheet">
</head>

<body>
  <div class="off-canvas-wrapper">
    <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper>

      <!-- <a href="download2.html">Redirect</a> -->
      <!-- OFF-CANVAS MENU -->
      <div class="off-canvas position-left" id="mobile-menu" data-off-canvas>
        <button class="accordion" id="home">HOME</button>
        <script type="text/javascript">
          document.getElementById("home").onclick = function () {
            location.href = "index.html";
          };
        </script>

        <button class="accordion" id="browse">BROWSE</button>
        <div class="panel">
          <ul style="text-align:left">
            <p>
              <li>HUMAN</li>
              <li>BROWSE</li>
              <li>ARABIDOPSIS</li>
              <li>PLANT</li>
            </p>
          </ul>
        </div>

        <button class="accordion" id="search">SEARCH</button>
        <script type="text/javascript">
          document.getElementById("search").onclick = function () {
            location.href = "search.html";
          };
        </script>

        <button class="accordion" id="download">DOWNLOAD</button>
        <script type="text/javascript">
          document.getElementById("download").onclick = function () {
            location.href = "download.html";
          };
        </script>

        <button class="accordion" id="help">HELP</button>
        <script type="text/javascript">
          document.getElementById("help").onclick = function () {
            location.href = "help.html";
          };
        </script>
      </div>

      <!-- KEEP -->
      <div class="off-canvas-content" data-off-canvas-content>

        <!-- MOBILE NAVIGATION -->

        <div class="title-bar show-for-small-only">
          <div class="title-bar-left">
            <button class="menu-icon" type="button" data-open="mobile-menu"></button>
            <!-- <span class="title-bar-title">MENU</span> -->

          </div>
          <div class="title-bar-center show-for-small-only"><img class="logo-image logo-center" src="img/xr_logo_white.png"
              width="75" height="92"></img></div>
        </div>

        <!-- DESKTOP NAVIGATION -->

        <div id = "header"></div>

        <!-- HERO SECTION -->

        <section class="hero">
          <div class="wrap" style="width:90%;">
            <h1>Downloads</h1>
            <blockquote>Out of six billion base pairs, pick out a spot and we"ll tell you how it is repaired.<cite>Aziz
                Sancar, 2015 Nobel Laureate in Chemistry</cite></blockquote>
            <p>This database serves the genomic maps of various DNA damage and repair of model organisms: Human, Mouse,
              Arabidopsis and E.coli. Damage and repair maps of the bulky adduct causing agents such as UV Cyclobutane
              pyrimidine dimers (CPDs), (6-4) Photoproduct, Cispatin, Oxiloplatin, Aflotoxin, Benzo[a]pyrene with a
              variety of treatments of different cell lines and strains are available. Start discovering now! </p>
            <a href="#" class="button">Learn More on XR-seq</a>
            <a href="#" class="button success">Learn More on Damage-seq</a>
            <p>Feel free to navigate and filter through this section and download any files you'd like to browse and
              use!</p>
            <!-- <a href="#" class="button">Learn More on XR-seq</a>
              <a href="#" class="button success">Learn More on Damage-seq</a> -->
          </div>

        </section>

        <!-- MAIN SECTION -->
        <section class="main wrap">
          
          <div id = "table">
              <table id="table_format" class="table table-bordered"><tbody><tr><th>Product</th>
                <th>Type</th>
                <th>In Stock</th>
                </tr><tr><td>Iphone</td>
                <td>6s</td>
                <td>Y</td>
                </tr><tr><td>samsung galaxy</td>
                <td>s8</td>
                <td>N</td>
                </tr><tr><td>Iphone</td>
                <td>7</td>
                <td>N</td>
                </tr></tbody></table>
          </div>
          <!-- <table id="organism-table" class="display" width="100%">
            <thead>
              <tr>
                <th>Organism</th>
                <th>Method</th>
                <th>Damage</th>
                <th>CellType</th>
                <th>Link</th>
                <th>Replicate</th>
                <th>Strain</th>
                <th>Time</th>
              </tr>
            </thead>  -->
           <!-- <tfoot>
              <tr>
                <th>Organism</th>
                <th>Method</th>
                <th>Damage</th>
                <th>CellType</th>
                <th>Link</th>
                <th>Replicate</th>
                <th>Strain</th>
                <th>Time</th>
              </tr>
            </tfoot>  
          </table> -->

          <div>
            <script type="text/javascript">
              $(document).ready(function () {

                // $('#organism-table tfoot th').each(function () {
                //   var title = $(this).text();
                //   $(this).html('<input type="text" placeholder="Search ' + title + '" />');
                // });

                $.ajax({
                  url: 'https://raw.githubusercontent.com/adebali/repairrepo/develop/testDownloads.json',
                  dataType: 'json',
                  success: function (data) {
                    console.log(data);
                    

                    //get all organisms from data to display in the dropdown
                    var orgs  = [];
                    data.forEach(element => {
                      if(orgs.indexOf(element["organism"]) === -1){
                        orgs.push(element["organism"])
                      }
                    });
                    var selectHTML = "<select> <option value = '' disabled selected> Select Organism</option>";
                    orgs.forEach(element =>{
                      selectHTML += "<option value =" + element + ">"+element+"</option>"
                    })
                    selectHTML += "</select>"
                    $("#orgSelect").html(selectHTML)


                   var table =  $('#organism-table').DataTable({
                      dom: 'Bfrtip',
                      data: data,
                      columns: [
                        { data: 'organism' },
                        { data: 'method' },
                        { data: 'damage' },
                        { data: 'cellType' },
                        { data: 'link' },
                        { data: 'replicate' },
                        { data: 'strain' },
                        { data: 'time' }
                      ],
                      buttons: [
                        // 'csv', 'excel', 'pdf'
                      ]
                    });

                    table.columns().every( function () {
        var that = this;
 
        // $( 'input', this.footer() ).on( 'keyup change', function () {
        //     if ( that.search() !== this.value ) {
        //         that
        //             .search( this.value )
        //             .draw();
        //     }
        // } );
    } );
                  }
                });
              });





              (function($) {

                $.fn.ddTableFilter = function(options) {
                  options = $.extend(true, $.fn.ddTableFilter.defaultOptions, options);

                  return this.each(function() {
                    if($(this).hasClass('ddtf-processed')) {
                      refreshFilters(this);
                      return;
                    }
                    var table = $(this);
                    var start = new Date();

                    $('th:visible', table).each(function(index) {
                      if($(this).hasClass('skip-filter')) return;
                      var selectbox = $('<select class="form-control">');
                      var values = [];
                      var opts = [];
                      selectbox.append('<option value="--all--">' + $(this).text() + '</option>');

                      var col = $('tr:not(.skip-filter) td:nth-child(' + (index + 1) + ')', table).each(function() {
                        var cellVal = options.valueCallback.apply(this);
                        if(cellVal.length == 0) {
                          cellVal = '--empty--';
                        }
                        $(this).attr('ddtf-value', cellVal);

                        if($.inArray(cellVal, values) === -1) {
                          var cellText = options.textCallback.apply(this);
                          if(cellText.length == 0) {cellText = options.emptyText;}
                          values.push(cellVal);
                          opts.push({val:cellVal, text:cellText});
                        }
                      });
                      if(opts.length < options.minOptions){
                        return;
                      }
                      if(options.sortOpt) {
                        opts.sort(options.sortOptCallback);
                      }
                      $.each(opts, function() {
                        $(selectbox).append('<option value="' + this.val + '">' + this.text + '</option>')
                      });

                      $(this).wrapInner('<div style="display:none">');
                      $(this).append(selectbox);

                      selectbox.bind('change', {column:col}, function(event) {
                        var changeStart = new Date();
                        var value = $(this).val();

                        event.data.column.each(function() {
                          if($(this).attr('ddtf-value') === value || value == '--all--') {
                            $(this).removeClass('ddtf-filtered');
                          }
                          else {
                            $(this).addClass('ddtf-filtered');
                          }
                        });
                        var changeStop = new Date();
                        if(options.debug) {
                          console.log('Search: ' + (changeStop.getTime() - changeStart.getTime()) + 'ms');
                        }
                        refreshFilters(table);

                      });
                      table.addClass('ddtf-processed');
                      if($.isFunction(options.afterBuild)) {
                        options.afterBuild.apply(table);
                      }
                    });

                    function refreshFilters(table) {
                      var refreshStart = new Date();
                      $('tr', table).each(function() {
                        var row = $(this);
                        if($('td.ddtf-filtered', row).length > 0) {
                          options.transition.hide.apply(row, options.transition.options);
                        }
                        else {
                          options.transition.show.apply(row, options.transition.options);
                        }
                      });

                      if($.isFunction(options.afterFilter)) {
                        options.afterFilter.apply(table);
                      }

                      if(options.debug) {
                        var refreshEnd = new Date();
                        console.log('Refresh: ' + (refreshEnd.getTime() - refreshStart.getTime()) + 'ms');
                      }
                    }

                    if(options.debug) {
                      var stop = new Date();
                      console.log('Build: ' + (stop.getTime() - start.getTime()) + 'ms');
                    }
                  });
                };

                $.fn.ddTableFilter.defaultOptions = {
                  valueCallback:function() {
                    return encodeURIComponent($.trim($(this).text()));
                  },
                  textCallback:function() {
                    return $.trim($(this).text());
                  },
                  sortOptCallback: function(a, b) {
                    return a.text.toLowerCase() > b.text.toLowerCase();
                  },
                  afterFilter: null,
                  afterBuild: null,
                  transition: {
                    hide:$.fn.hide,
                    show:$.fn.show,
                    options: []
                  },
                  emptyText:'--Empty--',
                  sortOpt:true,
                  debug:false,
                  minOptions:2
                }

              })(jQuery);
              jQuery('#table_format').ddTableFilter();
            </script>
          </div>
        </section>

        <!-- FOOTER -->
        <div id = "footer"></div>
      </div>
    </div>
  </div>

  <!-- Keep above script out to prevent conflict w/ jquery script -->
  <script src="js/vendor/what-input.js"></script>
  <script src="js/vendor/foundation.js"></script>
  <script src="js/app.js"></script>
  <script src="js/accordion.js"></script>
  <script>
    $("#header").load("/frontend/header.html")
    $("#footer").load("/frontend/footerNew.html")
  </script>
  <script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/1.5.2/js/dataTables.buttons.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.flash.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
  <script src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.html5.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.print.min.js"></script>
</body>

</html>